<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIçŸ¥è­˜ãƒãƒˆãƒ«</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700;900&display=swap');
        
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background: linear-gradient(135deg, #0f172a, #1e293b);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .game-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease;
        }
        
        .option-btn {
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
        }
        
        .option-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .option-btn.correct {
            background-color: #10b981;
            color: white;
            animation: pulse 0.5s;
        }
        
        .option-btn.incorrect {
            background-color: #ef4444;
            color: white;
            animation: shake 0.5s;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-5px); }
            40%, 80% { transform: translateX(5px); }
        }
        
        .timer-bar {
            height: 8px;
            background: linear-gradient(90deg, #3b82f6, #8b5cf6);
            border-radius: 4px;
            transition: width 0.1s linear;
        }
        
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #f59e0b;
            border-radius: 50%;
            animation: fall 3s ease-in infinite;
        }
        
        @keyframes fall {
            0% {
                transform: translateY(-100px) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }
        
        .points-popup {
            position: absolute;
            color: #10b981;
            font-weight: bold;
            font-size: 1.5rem;
            animation: float-up 1.5s forwards;
            pointer-events: none;
        }
        
        @keyframes float-up {
            0% {
                opacity: 0;
                transform: translateY(0);
            }
            20% {
                opacity: 1;
            }
            80% {
                opacity: 1;
            }
            100% {
                opacity: 0;
                transform: translateY(-50px);
            }
        }
        
        .combo-text {
            text-shadow: 0 0 10px rgba(139, 92, 246, 0.7);
            animation: pulse 0.5s infinite alternate;
        }
        
        .star {
            position: absolute;
            font-size: 24px;
            animation: twinkle 1.5s infinite alternate;
        }
        
        @keyframes twinkle {
            0% { opacity: 0.3; transform: scale(0.8); }
            100% { opacity: 1; transform: scale(1.1); }
        }
        
        .character {
            transition: all 0.3s ease;
        }
        
        .character:hover {
            transform: translateY(-5px);
        }
    </style>
</head>
<body class="p-4 md:p-8">
    <div id="confetti-container" class="fixed inset-0 pointer-events-none z-50"></div>
    <div id="points-container" class="fixed inset-0 pointer-events-none z-40"></div>
    
    <!-- ã‚²ãƒ¼ãƒ ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ -->
    <div id="start-screen" class="max-w-3xl mx-auto">
        <div class="game-card rounded-3xl p-8 text-center">
            <h1 class="text-5xl font-black text-indigo-600 mb-6">AIçŸ¥è­˜ãƒãƒˆãƒ«</h1>
            <div class="flex justify-center mb-8">
                <div class="character text-8xl">ğŸ¤–</div>
            </div>
            <p class="text-xl text-gray-700 mb-8">AIã®çŸ¥è­˜ã‚’ç«¶ã†ã‚¨ã‚­ã‚µã‚¤ãƒ†ã‚£ãƒ³ã‚°ãªã‚¯ã‚¤ã‚ºã‚²ãƒ¼ãƒ ï¼<br>åˆ¶é™æ™‚é–“å†…ã«ç­”ãˆã¦ã€é«˜å¾—ç‚¹ã‚’ç›®æŒ‡ãã†ï¼</p>
            <div class="bg-indigo-100 rounded-xl p-4 mb-8">
                <h3 class="font-bold text-indigo-800 mb-2">ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ«</h3>
                <ul class="text-left text-indigo-700 space-y-2">
                    <li>âœ“ æ­£è§£ã§100ãƒã‚¤ãƒ³ãƒˆç²å¾—</li>
                    <li>âœ“ ç´ æ—©ãç­”ãˆã‚‹ã¨ã‚¿ã‚¤ãƒ ãƒœãƒ¼ãƒŠã‚¹æœ€å¤§50ãƒã‚¤ãƒ³ãƒˆ</li>
                    <li>âœ“ é€£ç¶šæ­£è§£ã§ã‚³ãƒ³ãƒœãƒœãƒ¼ãƒŠã‚¹ï¼</li>
                    <li>âœ“ å…¨5å•ã€æœ€é«˜ã‚¹ã‚³ã‚¢ã‚’ç›®æŒ‡ãã†ï¼</li>
                </ul>
            </div>
            <button id="start-btn" class="bg-indigo-600 text-white text-xl px-10 py-4 rounded-xl hover:bg-indigo-700 transition-colors font-bold shadow-lg hover:shadow-xl transform hover:-translate-y-1">
                ã‚²ãƒ¼ãƒ ã‚¹ã‚¿ãƒ¼ãƒˆ
            </button>
        </div>
    </div>
    
    <!-- ã‚²ãƒ¼ãƒ ç”»é¢ -->
    <div id="game-screen" class="max-w-3xl mx-auto hidden">
        <div class="game-card rounded-3xl p-6 md:p-8">
            <div class="flex justify-between items-center mb-4">
                <div class="bg-indigo-100 rounded-lg px-4 py-2">
                    <span id="question-number" class="font-bold text-indigo-800">å•é¡Œ 1/5</span>
                </div>
                <div class="flex items-center space-x-2">
                    <span class="text-yellow-500 text-2xl">â­</span>
                    <span id="score-display" class="font-bold text-xl">0</span>
                </div>
            </div>
            
            <div class="mb-4">
                <div class="flex justify-between text-sm text-gray-600 mb-1">
                    <span>æ®‹ã‚Šæ™‚é–“</span>
                    <span id="time-display">15ç§’</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2">
                    <div id="timer-bar" class="timer-bar w-full"></div>
                </div>
            </div>
            
            <div id="combo-display" class="hidden text-center mb-4">
                <span class="combo-text inline-block bg-gradient-to-r from-purple-600 to-indigo-600 text-transparent bg-clip-text font-black text-xl">
                    <span id="combo-count">2</span>é€£ç¶šæ­£è§£ï¼ ã‚³ãƒ³ãƒœ x<span id="combo-multiplier">1.5</span>
                </span>
            </div>
            
            <div id="question-container" class="mb-6">
                <h2 id="question-text" class="text-2xl font-bold text-gray-800 mb-6 leading-tight">AIã¨ã„ã†è¨€è‘‰ã®æ­£å¼åç§°ã¯ä½•ã§ã™ã‹ï¼Ÿ</h2>
                
                <div id="options-container" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- é¸æŠè‚¢ã¯JSã§å‹•çš„ã«ç”Ÿæˆ -->
                </div>
            </div>
            
            <div id="feedback-container" class="hidden bg-indigo-100 border-l-4 border-indigo-500 p-4 rounded-lg mb-6">
                <p id="feedback-text" class="text-indigo-800"></p>
            </div>
            
            <div class="flex justify-center">
                <button id="next-btn" class="hidden bg-indigo-600 text-white px-8 py-3 rounded-xl hover:bg-indigo-700 transition-colors font-bold">æ¬¡ã®å•é¡Œã¸</button>
            </div>
        </div>
    </div>
    
    <!-- çµæœç”»é¢ -->
    <div id="results-screen" class="max-w-3xl mx-auto hidden">
        <div class="game-card rounded-3xl p-8 text-center">
            <h2 class="text-4xl font-black text-indigo-600 mb-6">ã‚²ãƒ¼ãƒ çµæœ</h2>
            
            <div class="mb-8">
                <div class="inline-flex items-center justify-center w-40 h-40 rounded-full bg-indigo-100 mb-4 relative">
                    <div id="stars-container" class="absolute inset-0"></div>
                    <span id="final-score" class="text-5xl font-black text-indigo-600">0</span>
                </div>
                <h3 id="rank-title" class="text-2xl font-bold text-gray-800 mb-2">ãƒ©ãƒ³ã‚¯: AIåˆå¿ƒè€…</h3>
                <p id="result-message" class="text-xl text-gray-700">AIã®ä¸–ç•Œã¯ã¾ã ã¾ã å¥¥æ·±ã„ã§ã™ã€‚ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼</p>
            </div>
            
            <div class="bg-indigo-50 rounded-xl p-6 mb-8">
                <h3 class="font-bold text-xl text-indigo-800 mb-4">ã‚¹ã‚³ã‚¢è©³ç´°</h3>
                <div class="grid grid-cols-2 gap-4 text-left">
                    <div>
                        <p class="text-gray-600">æ­£è§£æ•°</p>
                        <p id="correct-answers" class="font-bold text-xl">0/5</p>
                    </div>
                    <div>
                        <p class="text-gray-600">åŸºæœ¬ãƒã‚¤ãƒ³ãƒˆ</p>
                        <p id="base-points" class="font-bold text-xl">0</p>
                    </div>
                    <div>
                        <p class="text-gray-600">ã‚¿ã‚¤ãƒ ãƒœãƒ¼ãƒŠã‚¹</p>
                        <p id="time-bonus" class="font-bold text-xl">0</p>
                    </div>
                    <div>
                        <p class="text-gray-600">ã‚³ãƒ³ãƒœãƒœãƒ¼ãƒŠã‚¹</p>
                        <p id="combo-bonus" class="font-bold text-xl">0</p>
                    </div>
                </div>
            </div>
            
            <div class="flex flex-col md:flex-row justify-center space-y-4 md:space-y-0 md:space-x-4">
                <button id="restart-btn" class="bg-indigo-600 text-white px-8 py-3 rounded-xl hover:bg-indigo-700 transition-colors font-bold">ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦ã™ã‚‹</button>
                <button id="share-btn" class="bg-blue-500 text-white px-8 py-3 rounded-xl hover:bg-blue-600 transition-colors font-bold">çµæœã‚’ã‚·ã‚§ã‚¢</button>
            </div>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const quizData = [
                {
                    question: "AIã¨ã„ã†è¨€è‘‰ã®æ­£å¼åç§°ã¯ä½•ã§ã™ã‹ï¼Ÿ",
                    options: [
                        { text: "äººå·¥çŸ¥èƒ½ï¼ˆArtificial Intelligenceï¼‰", correct: true },
                        { text: "è‡ªå‹•æƒ…å ±ï¼ˆAutomated Informationï¼‰", correct: false },
                        { text: "é«˜åº¦æƒ…å ±å‡¦ç†ï¼ˆAdvanced Information Processingï¼‰", correct: false },
                        { text: "åˆ†æã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼ˆAnalytical Interfaceï¼‰", correct: false }
                    ],
                    explanation: "AIã¯ã€ŒArtificial Intelligenceï¼ˆäººå·¥çŸ¥èƒ½ï¼‰ã€ã®ç•¥ç§°ã§ã™ã€‚äººé–“ã®çŸ¥èƒ½ã‚’æ¨¡å€£ã™ã‚‹ã‚ˆã†ã«è¨­è¨ˆã•ã‚ŒãŸã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã‚·ã‚¹ãƒ†ãƒ ã‚’æŒ‡ã—ã¾ã™ã€‚"
                },
                {
                    question: "ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ã¨ã¯ä½•ã§ã™ã‹ï¼Ÿ",
                    options: [
                        { text: "ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãŒè‡ªåˆ†ã§å­¦ç¿’ã™ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°æ‰‹æ³•", correct: false },
                        { text: "å¤šå±¤ã®ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’ä½¿ç”¨ã—ãŸæ©Ÿæ¢°å­¦ç¿’ã®ä¸€ç¨®", correct: true },
                        { text: "å¤§é‡ã®ãƒ‡ãƒ¼ã‚¿ã‚’é«˜é€Ÿã§å‡¦ç†ã™ã‚‹æŠ€è¡“", correct: false },
                        { text: "äººé–“ã®è„³ã‚’ã‚¹ã‚­ãƒ£ãƒ³ã™ã‚‹æŠ€è¡“", correct: false }
                    ],
                    explanation: "ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ã¯å¤šå±¤ï¼ˆæ·±å±¤ï¼‰ã®ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’ä½¿ç”¨ã—ãŸæ©Ÿæ¢°å­¦ç¿’ã®ä¸€ç¨®ã§ã€ç‰¹ã«ç”»åƒèªè­˜ã‚„è‡ªç„¶è¨€èªå‡¦ç†ãªã©ã®åˆ†é‡ã§é©å‘½çš„ãªé€²æ­©ã‚’ã‚‚ãŸã‚‰ã—ã¾ã—ãŸã€‚"
                },
                {
                    question: "ã€Œãƒãƒ¥ãƒ¼ãƒªãƒ³ã‚°ãƒ†ã‚¹ãƒˆã€ã¨ã¯ä½•ã‚’åˆ¤æ–­ã™ã‚‹ãŸã‚ã®ãƒ†ã‚¹ãƒˆã§ã™ã‹ï¼Ÿ",
                    options: [
                        { text: "ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã®å‡¦ç†é€Ÿåº¦", correct: false },
                        { text: "AIã®å‰µé€ æ€§", correct: false },
                        { text: "æ©Ÿæ¢°ãŒäººé–“ã®ã‚ˆã†ã«æ€è€ƒã§ãã‚‹ã‹ã©ã†ã‹", correct: true },
                        { text: "ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ãƒã‚°ã®æœ‰ç„¡", correct: false }
                    ],
                    explanation: "ãƒãƒ¥ãƒ¼ãƒªãƒ³ã‚°ãƒ†ã‚¹ãƒˆã¯ã€ã‚¢ãƒ©ãƒ³ãƒ»ãƒãƒ¥ãƒ¼ãƒªãƒ³ã‚°ãŒææ¡ˆã—ãŸã€æ©Ÿæ¢°ãŒäººé–“ã¨åŒºåˆ¥ãŒã¤ã‹ãªã„ã»ã©çŸ¥çš„ãªä¼šè©±ãŒã§ãã‚‹ã‹ã‚’åˆ¤æ–­ã™ã‚‹ãŸã‚ã®ãƒ†ã‚¹ãƒˆã§ã™ã€‚"
                },
                {
                    question: "æ¬¡ã®ã†ã¡ã€ç”ŸæˆAIã®ä»£è¡¨çš„ãªãƒ¢ãƒ‡ãƒ«ã¯ã©ã‚Œã§ã™ã‹ï¼Ÿ",
                    options: [
                        { text: "Microsoft Excel", correct: false },
                        { text: "GPTï¼ˆGenerative Pre-trained Transformerï¼‰", correct: true },
                        { text: "HTML5", correct: false },
                        { text: "Bluetooth", correct: false }
                    ],
                    explanation: "GPTï¼ˆGenerative Pre-trained Transformerï¼‰ã¯ã€OpenAIãŒé–‹ç™ºã—ãŸå¤§è¦æ¨¡è¨€èªãƒ¢ãƒ‡ãƒ«ã§ã€ãƒ†ã‚­ã‚¹ãƒˆç”Ÿæˆã‚„ä¼šè©±ãªã©ã®ç”ŸæˆAIã®ä»£è¡¨çš„ãªä¾‹ã§ã™ã€‚"
                },
                {
                    question: "æ©Ÿæ¢°å­¦ç¿’ã«ãŠã„ã¦ã€Œéå­¦ç¿’ï¼ˆã‚ªãƒ¼ãƒãƒ¼ãƒ•ã‚£ãƒƒãƒ†ã‚£ãƒ³ã‚°ï¼‰ã€ã¨ã¯ä½•ã§ã™ã‹ï¼Ÿ",
                    options: [
                        { text: "ãƒ¢ãƒ‡ãƒ«ãŒè¨“ç·´ãƒ‡ãƒ¼ã‚¿ã«å¯¾ã—ã¦éåº¦ã«é©åˆã—ã€æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿ã«å¯¾ã™ã‚‹æ€§èƒ½ãŒä½ä¸‹ã™ã‚‹ç¾è±¡", correct: true },
                        { text: "AIãŒäººé–“ã‚ˆã‚Šã‚‚å„ªã‚ŒãŸå­¦ç¿’èƒ½åŠ›ã‚’æŒã¤ã“ã¨", correct: false },
                        { text: "ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãŒå‡¦ç†ã§ãã‚‹ä»¥ä¸Šã®ãƒ‡ãƒ¼ã‚¿ã‚’å­¦ç¿’ã—ã‚ˆã†ã¨ã™ã‚‹ã“ã¨", correct: false },
                        { text: "å­¦ç¿’æ™‚é–“ãŒé•·ã™ãã¦éåŠ¹ç‡ã«ãªã‚‹ã“ã¨", correct: false }
                    ],
                    explanation: "éå­¦ç¿’ï¼ˆã‚ªãƒ¼ãƒãƒ¼ãƒ•ã‚£ãƒƒãƒ†ã‚£ãƒ³ã‚°ï¼‰ã¯ã€ãƒ¢ãƒ‡ãƒ«ãŒè¨“ç·´ãƒ‡ãƒ¼ã‚¿ã®ç‰¹å¾´ã‚’éåº¦ã«å­¦ç¿’ã—ã¦ã—ã¾ã„ã€æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿ã«å¯¾ã™ã‚‹æ±åŒ–èƒ½åŠ›ãŒä½ä¸‹ã™ã‚‹å•é¡Œã§ã™ã€‚"
                }
            ];
            
            // ã‚²ãƒ¼ãƒ çŠ¶æ…‹
            let currentQuestion = 0;
            let score = 0;
            let basePoints = 0;
            let timeBonus = 0;
            let comboBonus = 0;
            let combo = 0;
            let correctAnswers = 0;
            let answered = false;
            let timer;
            let timeLeft = 15;
            let maxTime = 15;
            
            // ç”»é¢è¦ç´ 
            const startScreen = document.getElementById('start-screen');
            const gameScreen = document.getElementById('game-screen');
            const resultsScreen = document.getElementById('results-screen');
            const startBtn = document.getElementById('start-btn');
            const questionText = document.getElementById('question-text');
            const optionsContainer = document.getElementById('options-container');
            const nextBtn = document.getElementById('next-btn');
            const questionNumber = document.getElementById('question-number');
            const scoreDisplay = document.getElementById('score-display');
            const timerBar = document.getElementById('timer-bar');
            const timeDisplay = document.getElementById('time-display');
            const feedbackContainer = document.getElementById('feedback-container');
            const feedbackText = document.getElementById('feedback-text');
            const finalScore = document.getElementById('final-score');
            const resultMessage = document.getElementById('result-message');
            const restartBtn = document.getElementById('restart-btn');
            const shareBtn = document.getElementById('share-btn');
            const comboDisplay = document.getElementById('combo-display');
            const comboCount = document.getElementById('combo-count');
            const comboMultiplier = document.getElementById('combo-multiplier');
            const correctAnswersDisplay = document.getElementById('correct-answers');
            const basePointsDisplay = document.getElementById('base-points');
            const timeBonusDisplay = document.getElementById('time-bonus');
            const comboBonusDisplay = document.getElementById('combo-bonus');
            const rankTitle = document.getElementById('rank-title');
            
            // ã‚²ãƒ¼ãƒ é–‹å§‹
            startBtn.addEventListener('click', () => {
                startScreen.classList.add('hidden');
                gameScreen.classList.remove('hidden');
                loadQuestion();
                startTimer();
            });
            
            // å•é¡Œèª­ã¿è¾¼ã¿
            function loadQuestion() {
                answered = false;
                const question = quizData[currentQuestion];
                
                questionText.textContent = question.question;
                optionsContainer.innerHTML = '';
                
                // é¸æŠè‚¢ã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«
                const shuffledOptions = [...question.options].sort(() => Math.random() - 0.5);
                
                shuffledOptions.forEach((option, index) => {
                    const button = document.createElement('button');
                    button.textContent = option.text;
                    button.classList.add('option-btn', 'p-4', 'rounded-xl', 'border-2', 'border-gray-300', 'hover:border-indigo-500', 'bg-white', 'hover:bg-indigo-50', 'transition-all', 'text-left');
                    button.dataset.correct = option.correct;
                    
                    button.addEventListener('click', selectAnswer);
                    optionsContainer.appendChild(button);
                });
                
                questionNumber.textContent = `å•é¡Œ ${currentQuestion + 1}/${quizData.length}`;
                
                nextBtn.classList.add('hidden');
                feedbackContainer.classList.add('hidden');
                
                // ã‚³ãƒ³ãƒœè¡¨ç¤º
                if (combo >= 2) {
                    comboDisplay.classList.remove('hidden');
                    comboCount.textContent = combo;
                    comboMultiplier.textContent = getComboMultiplier().toFixed(1);
                } else {
                    comboDisplay.classList.add('hidden');
                }
                
                // ã‚¿ã‚¤ãƒãƒ¼ãƒªã‚»ãƒƒãƒˆ
                timeLeft = maxTime;
                timeDisplay.textContent = `${timeLeft}ç§’`;
                timerBar.style.width = '100%';
            }
            
            // ã‚¿ã‚¤ãƒãƒ¼é–‹å§‹
            function startTimer() {
                clearInterval(timer);
                timer = setInterval(() => {
                    timeLeft -= 0.1;
                    const percentage = (timeLeft / maxTime) * 100;
                    timerBar.style.width = `${percentage}%`;
                    timeDisplay.textContent = `${Math.ceil(timeLeft)}ç§’`;
                    
                    if (timeLeft <= 0) {
                        clearInterval(timer);
                        if (!answered) {
                            timeOut();
                        }
                    }
                }, 100);
            }
            
            // æ™‚é–“åˆ‡ã‚Œ
            function timeOut() {
                answered = true;
                combo = 0;
                
                // æ­£è§£ã‚’è¡¨ç¤º
                optionsContainer.querySelectorAll('.option-btn').forEach(button => {
                    button.disabled = true;
                    if (button.dataset.correct === "true") {
                        button.classList.add('correct');
                    }
                });
                
                feedbackText.textContent = `æ™‚é–“åˆ‡ã‚Œï¼${quizData[currentQuestion].explanation}`;
                feedbackContainer.classList.remove('hidden');
                
                nextBtn.classList.remove('hidden');
            }
            
            // å›ç­”é¸æŠ
            function selectAnswer(e) {
                if (answered) return;
                
                clearInterval(timer);
                answered = true;
                const selectedBtn = e.target;
                const isCorrect = selectedBtn.dataset.correct === "true";
                
                if (isCorrect) {
                    selectedBtn.classList.add('correct');
                    
                    // åŸºæœ¬ãƒã‚¤ãƒ³ãƒˆ
                    const basePoint = 100;
                    basePoints += basePoint;
                    
                    // ã‚¿ã‚¤ãƒ ãƒœãƒ¼ãƒŠã‚¹
                    const timeBonusPoints = Math.round((timeLeft / maxTime) * 50);
                    timeBonus += timeBonusPoints;
                    
                    // ã‚³ãƒ³ãƒœãƒœãƒ¼ãƒŠã‚¹
                    combo++;
                    let comboPoints = 0;
                    if (combo >= 2) {
                        const multiplier = getComboMultiplier();
                        comboPoints = Math.round(basePoint * (multiplier - 1));
                        comboBonus += comboPoints;
                    }
                    
                    // åˆè¨ˆãƒã‚¤ãƒ³ãƒˆ
                    const totalPoints = basePoint + timeBonusPoints + comboPoints;
                    score += totalPoints;
                    correctAnswers++;
                    
                    // ãƒã‚¤ãƒ³ãƒˆè¡¨ç¤ºã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
                    showPointsPopup(selectedBtn, totalPoints);
                    
                    // ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
                    createConfetti(15);
                    
                } else {
                    selectedBtn.classList.add('incorrect');
                    combo = 0;
                    
                    // æ­£è§£ã‚’è¡¨ç¤º
                    optionsContainer.querySelectorAll('.option-btn').forEach(button => {
                        if (button.dataset.correct === "true") {
                            button.classList.add('correct');
                        }
                    });
                }
                
                scoreDisplay.textContent = score;
                
                // ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯è¡¨ç¤º
                feedbackText.textContent = quizData[currentQuestion].explanation;
                feedbackContainer.classList.remove('hidden');
                
                // å…¨ã¦ã®ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–
                optionsContainer.querySelectorAll('.option-btn').forEach(button => {
                    button.disabled = true;
                });
                
                nextBtn.classList.remove('hidden');
            }
            
            // ã‚³ãƒ³ãƒœå€ç‡è¨ˆç®—
            function getComboMultiplier() {
                if (combo <= 1) return 1;
                return Math.min(1 + (combo - 1) * 0.2, 2.0); // æœ€å¤§2å€ã¾ã§
            }
            
            // ãƒã‚¤ãƒ³ãƒˆè¡¨ç¤ºã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
            function showPointsPopup(element, points) {
                const popup = document.createElement('div');
                popup.classList.add('points-popup');
                popup.textContent = `+${points}`;
                
                const rect = element.getBoundingClientRect();
                popup.style.left = `${rect.left + rect.width / 2}px`;
                popup.style.top = `${rect.top}px`;
                
                document.getElementById('points-container').appendChild(popup);
                
                setTimeout(() => {
                    popup.remove();
                }, 1500);
            }
            
            // æ¬¡ã®å•é¡Œã¸
            nextBtn.addEventListener('click', () => {
                currentQuestion++;
                
                if (currentQuestion < quizData.length) {
                    loadQuestion();
                    startTimer();
                } else {
                    showResults();
                }
            });
            
            // çµæœè¡¨ç¤º
            function showResults() {
                gameScreen.classList.add('hidden');
                resultsScreen.classList.remove('hidden');
                
                finalScore.textContent = score;
                correctAnswersDisplay.textContent = `${correctAnswers}/${quizData.length}`;
                basePointsDisplay.textContent = basePoints;
                timeBonusDisplay.textContent = timeBonus;
                comboBonusDisplay.textContent = comboBonus;
                
                // ãƒ©ãƒ³ã‚¯åˆ¤å®š
                let rank, message;
                if (score >= 700) {
                    rank = "AIãƒã‚¹ã‚¿ãƒ¼";
                    message = "ç´ æ™´ã‚‰ã—ã„ï¼ã‚ãªãŸã¯AIã®çŸ¥è­˜ã«ç²¾é€šã—ã¦ã„ã¾ã™ï¼";
                    createStars(5);
                    createConfetti(50);
                } else if (score >= 500) {
                    rank = "AIç ”ç©¶è€…";
                    message = "ã™ã”ã„ï¼AIã«ã¤ã„ã¦ã‹ãªã‚Šè©³ã—ã„ã§ã™ã­ï¼";
                    createStars(4);
                    createConfetti(30);
                } else if (score >= 300) {
                    rank = "AIæŠ€è¡“è€…";
                    message = "ã‚ˆãã§ãã¾ã—ãŸï¼AIã®åŸºæœ¬ã‚’ã—ã£ã‹ã‚Šç†è§£ã—ã¦ã„ã¾ã™ã€‚";
                    createStars(3);
                } else if (score >= 150) {
                    rank = "AIå­¦ç¿’è€…";
                    message = "é ‘å¼µã‚Šã¾ã—ãŸï¼AIã®çŸ¥è­˜ã‚’ç€å®Ÿã«èº«ã«ã¤ã‘ã¦ã„ã¾ã™ã€‚";
                    createStars(2);
                } else {
                    rank = "AIåˆå¿ƒè€…";
                    message = "AIã®ä¸–ç•Œã¯ã¾ã ã¾ã å¥¥æ·±ã„ã§ã™ã€‚ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼";
                    createStars(1);
                }
                
                rankTitle.textContent = `ãƒ©ãƒ³ã‚¯: ${rank}`;
                resultMessage.textContent = message;
            }
            
            // æ˜Ÿã‚’è¡¨ç¤º
            function createStars(count) {
                const starsContainer = document.getElementById('stars-container');
                starsContainer.innerHTML = '';
                
                for (let i = 0; i < count; i++) {
                    const star = document.createElement('div');
                    star.classList.add('star');
                    star.textContent = 'â­';
                    
                    const angle = (i / count) * Math.PI * 2;
                    const radius = 70;
                    const x = Math.cos(angle) * radius;
                    const y = Math.sin(angle) * radius;
                    
                    star.style.left = `calc(50% + ${x}px)`;
                    star.style.top = `calc(50% + ${y}px)`;
                    star.style.animationDelay = `${i * 0.2}s`;
                    
                    starsContainer.appendChild(star);
                }
            }
            
            // ç´™å¹é›ªã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
            function createConfetti(amount = 15) {
                const confettiContainer = document.getElementById('confetti-container');
                const colors = ['#f59e0b', '#10b981', '#3b82f6', '#8b5cf6', '#ec4899'];
                
                for (let i = 0; i < amount; i++) {
                    const confetti = document.createElement('div');
                    confetti.classList.add('confetti');
                    confetti.style.left = `${Math.random() * 100}%`;
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.width = `${Math.random() * 10 + 5}px`;
                    confetti.style.height = confetti.style.width;
                    confetti.style.animationDuration = `${Math.random() * 3 + 2}s`;
                    confetti.style.animationDelay = `${Math.random() * 2}s`;
                    
                    confettiContainer.appendChild(confetti);
                    
                    setTimeout(() => {
                        confetti.remove();
                    }, 5000);
                }
            }
            
            // ãƒªã‚¹ã‚¿ãƒ¼ãƒˆ
            restartBtn.addEventListener('click', () => {
                currentQuestion = 0;
                score = 0;
                basePoints = 0;
                timeBonus = 0;
                comboBonus = 0;
                combo = 0;
                correctAnswers = 0;
                
                scoreDisplay.textContent = score;
                resultsScreen.classList.add('hidden');
                gameScreen.classList.remove('hidden');
                
                loadQuestion();
                startTimer();
            });
            
            // çµæœã‚·ã‚§ã‚¢
            shareBtn.addEventListener('click', () => {
                const text = `AIçŸ¥è­˜ãƒãƒˆãƒ«ã§${score}ç‚¹ç²å¾—ï¼ãƒ©ãƒ³ã‚¯ï¼š${rankTitle.textContent.replace('ãƒ©ãƒ³ã‚¯: ', '')}`;
                
                if (navigator.share) {
                    navigator.share({
                        title: 'AIçŸ¥è­˜ãƒãƒˆãƒ«',
                        text: text
                    }).catch(console.error);
                } else {
                    alert(`${text}\n\nã‚¹ã‚³ã‚¢ã‚’ã‚·ã‚§ã‚¢ã—ã‚ˆã†ï¼`);
                }
            });
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'964afd800215d4cc',t:'MTc1MzQzOTUxMy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
